

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Tree">
  <meta name="keywords" content="">
  
    <meta name="description" content="阅读红宝石书第一章脚本语言（script）就是解释性语言  脚本语言 读一行，执行一行，运行到报错的地方才会报错 非脚本语言 需要读取所有代码进行编译（检查代码中的错误）通过后再进行执行  Javascript 实现 核心（ECMAScript）  由 ECMA-262 定义并提供核心功能 语法 类型 语句 关键字 保留字 操作符 全局对象举例：ES6 ECAMA-262 第 6 版     文档">
<meta property="og:type" content="article">
<meta property="og:title" content="redbook">
<meta property="og:url" content="https://treeu.github.io/2024/02/05/redbook/index.html">
<meta property="og:site_name" content="Treeu&#39;s blog">
<meta property="og:description" content="阅读红宝石书第一章脚本语言（script）就是解释性语言  脚本语言 读一行，执行一行，运行到报错的地方才会报错 非脚本语言 需要读取所有代码进行编译（检查代码中的错误）通过后再进行执行  Javascript 实现 核心（ECMAScript）  由 ECMA-262 定义并提供核心功能 语法 类型 语句 关键字 保留字 操作符 全局对象举例：ES6 ECAMA-262 第 6 版     文档">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-00-20-30.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-00-42-58.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-22-31-35.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-22-59-02.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-23-20-41.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-23-35-28.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-15-15-07-59.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-15-15-16-04.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-09-11-27-47.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-09-15-36-21.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-09-17-01-03.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-09-17-08-15.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-13-14-43.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-13-18-54.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-13-34-43.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-15-27-14.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-15-36-01.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-16-37-09.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-18-41-37.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-18-54-24.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-21-10-50.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-21-11-08.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-22-42-48.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-23-27-32.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-10-23-30-19.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-10-19-35.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-11-12-25.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-11-31-20.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-13-24-22.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-16-48-10.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-22-39-28.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-22-52-42.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-11-23-17-12.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-12-22-49-28.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-12-23-46-59.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-12-23-52-36.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-13-11-57-59.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-13-13-21-39.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-18-22-09-05.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-18-22-11-03.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-18-22-42-57.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-18-22-57-30.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-18-23-13-55.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-19-21-36-34.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-19-22-00-34.png">
<meta property="og:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-19-22-03-38.png">
<meta property="article:published_time" content="2024-02-05T04:55:10.000Z">
<meta property="article:modified_time" content="2024-02-19T14:08:43.940Z">
<meta property="article:author" content="Tree">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://treeu.github.io/2024/02/05/redbook/2024-02-08-00-20-30.png">
  
  
  
  <title>redbook - Treeu&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"treeu.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Treeu</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="redbook"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-02-05 12:55" pubdate>
          February 5, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          14k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          119 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">redbook</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on 6 days ago
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="阅读红宝石书"><a href="#阅读红宝石书" class="headerlink" title="阅读红宝石书"></a>阅读红宝石书</h1><h1 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h1><h2 id="脚本语言（script）"><a href="#脚本语言（script）" class="headerlink" title="脚本语言（script）"></a>脚本语言（script）</h2><p>就是解释性语言</p>
<ul>
<li>脚本语言 读一行，执行一行，运行到报错的地方才会报错</li>
<li>非脚本语言 需要读取所有代码进行编译（检查代码中的错误）通过后再进行执行</li>
</ul>
<h2 id="Javascript-实现"><a href="#Javascript-实现" class="headerlink" title="Javascript 实现"></a>Javascript 实现</h2><ul>
<li><p>核心（ECMAScript）</p>
<ul>
<li>由 ECMA-262 定义并提供核心功能<ul>
<li>语法</li>
<li>类型</li>
<li>语句</li>
<li>关键字</li>
<li>保留字</li>
<li>操作符</li>
<li>全局对象<br>举例：ES6 ECAMA-262 第 6 版</li>
</ul>
</li>
</ul>
</li>
<li><p>文档对象模型（DOM）<br>提供与网页内容交互的方法和接口</p>
<ul>
<li>DOM 将页面抽象成分层节点</li>
<li>使用 DOM API 可以轻松的删除、添加、替换、修改节点</li>
<li>有些语言发布了自己的 DOM 标准，增加了该语言独有的 DOM 方法和接口，比如 SVG；</li>
<li>鼠标事件等</li>
</ul>
</li>
<li><p>浏览器对象模型（BOM）<br>提供与浏览器交互的方法和接口</p>
<ul>
<li>用于访问和操作浏览器的窗口和子窗口（frame）<ul>
<li>弹出新浏览器窗口，window 对象</li>
<li>移动、缩放和关闭浏览器窗口</li>
<li>navigator 对象，提供关于浏览器的详尽信息</li>
<li>location 对象，提供浏览器加载页面的详尽信息</li>
</ul>
</li>
<li>javascript 版本 9<ul>
<li>screen 对象，提供关于用户屏幕分辨率的详尽信息；</li>
<li>performance 对象，提供浏览器内存占用、导航行为和时间统计的详尽信息</li>
<li>对 cookie 的支持</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第二章-HTML-中的-JavaScript"><a href="#第二章-HTML-中的-JavaScript" class="headerlink" title="第二章 HTML 中的 JavaScript"></a>第二章 HTML 中的 JavaScript</h1><h2 id="元素"><a href="#元素" class="headerlink" title="&lt;script&gt;元素"></a><code>&lt;script&gt;</code>元素</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul>
<li>async 可选 只适用于外部文本，立即开始下载脚本，但不能阻止其他页面动作，比如下载资源</li>
<li>charset，代码字符集，基本上不是用，浏览器不在乎</li>
<li>crossorigin 跨域设置 默认不使用</li>
<li>defer 只对外部文件有效，脚本可延迟到文档解析和显示之后再执行</li>
<li>intergrity 对比接收到的资源和指定的加密签名，不匹配页面报错，脚本不会执行</li>
<li>language 废弃 例如：javascript 1.2</li>
<li>src 要执行代码的外部文件 url</li>
<li>type 代替 language，代表代码块中脚本语言的内容类型（MIME 类型），依照惯例：<code>text/javascript</code>,type 属性的值有可能导致脚本会忽略。比如 module，会被作为是 ES6 模块，最佳做法是不指定 type 属性，因为浏览器对 MIME 类型并么有标准化，可能会无法识别导致不执行脚本</li>
</ul>
<h4 id="async-和-defer-的区别"><a href="#async-和-defer-的区别" class="headerlink" title="async 和 defer 的区别"></a>async 和 defer 的区别</h4><p>defer 后的脚本也是顺序执行的，所以可能存在依赖关系<br>async 脚本它们直接没有依赖关系，目的是告诉浏览器，不必等待脚本下载和执行完成后再加载页面，也不用等待该异步脚本下载和执行完成后在加载其他脚本，异步脚本不应该在加载期间修改 DOM</p>
<h3 id="使用外部-javascript-代码的优点"><a href="#使用外部-javascript-代码的优点" class="headerlink" title="使用外部 javascript 代码的优点"></a>使用外部 javascript 代码的优点</h3><ul>
<li>可维护性 独立开发互不相扰</li>
<li>缓存 如果两个页面使用同一个 js 文件，该文件只需要下载一次，这里请求外部文件需要考虑的它们会占多少带宽，最佳实践是将功能划分得更轻量更独立；</li>
<li>适应未来，对兼容性的考虑，比如 XHTML 对于&lt;的处理</li>
</ul>
<h2 id="文档模式"><a href="#文档模式" class="headerlink" title="文档模式"></a>文档模式</h2><h3 id="元素-1"><a href="#元素-1" class="headerlink" title="&lt;noscript&gt;元素"></a><code>&lt;noscript&gt;</code>元素</h3><ul>
<li>浏览器不支持脚本</li>
<li>浏览器对脚本的支持被关闭</li>
</ul>
<h1 id="第三章-语言基础"><a href="#第三章-语言基础" class="headerlink" title="第三章 语言基础"></a>第三章 语言基础</h1><ul>
<li>语法</li>
<li>数据类型</li>
<li>流控制语句</li>
<li>理解函数</li>
</ul>
<h3 id="var"><a href="#var" class="headerlink" title="var"></a>var</h3><p>变量提升</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age);<br>	<span class="hljs-keyword">var</span> age = <span class="hljs-number">26</span>;<br>&#125;<br><span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure>

<h3 id="let-声明"><a href="#let-声明" class="headerlink" title="let 声明"></a>let 声明</h3><h4 id="let-和-var-区别"><a href="#let-和-var-区别" class="headerlink" title="let 和 var 区别"></a>let 和 var 区别</h4><ul>
<li>let 声明范围是块作用域，var 声明的范围是函数作用域 , 也就是 let 的声明范围更小</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>	<span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;aa&#x27;</span>;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// aa</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// aa</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>let 不允许重复声明</p>
</li>
<li><p>let 声明的变量没有变量提升</p>
</li>
<li><p>全局声明与 var 关键字不同，使用 let 在全局声明中的变量不会变成 window 对象的属性</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;aa&#x27;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span>);<br></code></pre></td></tr></table></figure>

<ul>
<li>for 循环中，var 声明的变量，保存的是循环退出之后的值，let 声明的变量，javascript 引擎在后台会为每个迭代循环声明一个新的迭代变量</li>
</ul>
<h3 id="const-声明"><a href="#const-声明" class="headerlink" title="const 声明"></a>const 声明</h3><p>声明变量时必须同时初始化变量</p>
<ul>
<li>不允许重复声明</li>
<li>声明的作用域也是块</li>
<li>注意，const 声明的限制只适用于它指向的变量的引用，也就是修改这个对象内部的属性并不违反 const 的限制</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> person = &#123;&#125;;<br>person.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;ma&#x27;</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>前面说到 let 声明的迭代变量是会递增的，所以不能用 const 来声明会被修改的迭代的变量，如果是不会被修改的变量那是可以的比如 for-of 和 for-in</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="简单数据类型"><a href="#简单数据类型" class="headerlink" title="简单数据类型"></a>简单数据类型</h3><p><code>undefined、null、String、number、boolean、Symbol</code></p>
<p>现在还有 BigInt，表示任意大小的整数</p>
<h3 id="复杂数据类型"><a href="#复杂数据类型" class="headerlink" title="复杂数据类型"></a>复杂数据类型</h3><p><code>Object</code></p>
<h3 id="typeof-操作符"><a href="#typeof-操作符" class="headerlink" title="typeof 操作符"></a>typeof 操作符</h3><p>注意 typeof null 返回 object，因为特殊值 null 可以被认为是一个空对象的引用</p>
<h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><p>逻辑上讲，null 值表示一个空指针对象</p>
<p>undefined 值是由 null 派生出来的，所以 ECMA-262 将它们定义为表面上相等<br><code>null == undefined // true</code></p>
<h3 id="Boolean-类型"><a href="#Boolean-类型" class="headerlink" title="Boolean 类型"></a>Boolean 类型</h3><p>布尔值不同于数值，因此 true 不等于 1 false 不等于 0</p>
<p>注意：if 等流控制语句会自动执行其他类型值到布尔值的转换</p>
<ul>
<li>String 类型 “” 空字符串会被转换为 false</li>
<li>Number 类型 0、NaN 会被转换为 fasle</li>
<li>Object 类型 null 会被转换为 fasle</li>
<li>Undefined 类型 false</li>
</ul>
<h3 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h3><p>基本的数值字面量是十进制的证书，整数也可以用八进制（以 8 为基数）或者十六进制字面量表示</p>
<ul>
<li>070 八进制的 56</li>
<li>0xA 10 十六进制的 10</li>
</ul>
<p>无效处理</p>
<p>079 &#x2F;&#x2F;无效的八进制数（0-7）会被认为是十进制</p>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><p>存储浮点值使用的内存空间是存储整数值的两倍，所以 ECMAScript 会想方设法的把值转换为整数</p>
<ul>
<li><code>let floatNum1 = 1.</code> 小数点后面没有数字,当作整数 1 处理</li>
<li><code>let floatNum2 = 10.0</code> 小数点后面是零，当成整数 10 处理</li>
</ul>
<h5 id="浮点数的-IEEE764-标准"><a href="#浮点数的-IEEE764-标准" class="headerlink" title="浮点数的 IEEE764 标准"></a>浮点数的 IEEE764 标准</h5><p>0.1+0.2 !&#x3D;&#x3D; 0.3</p>
<p>对于 ECMAScript 中所有的数值都使用了 IEEE754 64 位格式进行存储</p>
<p>IEEE754 定义了在计算机中浮点数应采用科学计数法法的形式，存储于固定长度的存储单元</p>
<p>转换过程：</p>
<ul>
<li>1、将十进制数转换为二进制数，整数部分直接转为二进制数，小数部分在转换无法收敛的时候选取适当长度进行截断（精度丢失）</li>
<li>2、确定符号位，确定有效小数，确定指数（2*n 次幂）</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://fasionchan.com/posts/ieee754-traps/">https://fasionchan.com/posts/ieee754-traps/</a></p>
<h4 id="值的范围"><a href="#值的范围" class="headerlink" title="值的范围"></a>值的范围</h4><p>由于内存限制<br>将最大值和最小值存在<code>Number.MIN_VALUE/Number.MAX_VALUE</code>,</p>
<p>最大安全整数：Number.MAX_SAFE_INTEGER（2^53 - 1）<br>最小安全整数：Number.MIN_SAFE_INTEGER (-(2^53 - 1))</p>
<p>如果超出了 Javascript 可以表示的范围，这个数值会被自动转换为一个特殊的 Infinity，正负号分别表示正无穷和负无穷</p>
<p>注意，正无穷和负无穷不能再进一步用于计算</p>
<p>isFinite() 用于确定一个值是不是有限大,计算非常大或非常小的数值时，有必要检测一下计算结果是否超范围</p>
<p>在溢出时返回该值</p>
<ul>
<li><code>Number.NAGATIVE_INFINITY</code> 特殊的负无穷大值</li>
<li><code>Number.POSITIVE_INFINITY</code> 特殊的正无穷大值</li>
</ul>
<h4 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h4><p>Not a Number<br>用来表示本来要返回数值的操作失败了</p>
<p>注意 0&#x2F;0 -0 返回的是 NaN，0 作为分母是 infinity&#x2F;-infinity<br><img src="/2024/02/05/redbook/2024-02-08-00-20-30.png" srcset="/img/loading.gif" lazyload></p>
<p>设计到 NaN 的操作始终返回 NaN<br>注意 NaN 不等于 NaN 在内的任何值</p>
<p><code>NaN == NaN</code> false</p>
<p>不能直接这样进行比较，所以提供了 isNaN()函数</p>
<p>接受任意参数，先尝试转换为数字，<br>注意 boolean true 可以转换为 0</p>
<p><img src="/2024/02/05/redbook/2024-02-08-00-42-58.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="数值转换"><a href="#数值转换" class="headerlink" title="数值转换"></a>数值转换</h4><ul>
<li><code>Number()</code><ul>
<li>布尔值 0 1</li>
<li>number 类型 直接返回</li>
<li>null 0</li>
<li>undefined 返回 NaN</li>
<li>字符串<ul>
<li><img src="/2024/02/05/redbook/2024-02-08-22-31-35.png" srcset="/img/loading.gif" lazyload></li>
</ul>
</li>
<li>对象先调用 valueof()方法，以上述规则返回值，如果是 NaN，则调用 toString()方法<br>注意：一元加操作符与 Number()函数遵循相同的转换规则</li>
</ul>
</li>
<li><code>parseInt()</code><br>需要得到整数时使用<br><strong>从非空格字符串开始检测，直到检测到末尾或者碰到非数字字符</strong><br>parseInt 更关注于字符串是否包含数值模式<br><img src="/2024/02/05/redbook/2024-02-08-22-59-02.png" srcset="/img/loading.gif" lazyload><br>有两个参数，第二个参数指定解析的进制数<br><img src="/2024/02/05/redbook/2024-02-08-23-20-41.png" srcset="/img/loading.gif" lazyload><br>为了避免解析出错，建议始终传给它第二个参数</li>
<li><code>parseFloat()</code><br>工作方式和 parseInt 类似，注意只能解析十进制值，不能指定底数，也就是没有二个参数可以传递<br>区别：<ul>
<li>只有第一次出现的小数点是有效的</li>
<li>会忽略开头的 0,只能解析十进制数，所以传 0x 开头的数值只会返回 0</li>
</ul>
</li>
</ul>
<p><img src="/2024/02/05/redbook/2024-02-08-23-35-28.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="BigInt"><a href="#BigInt" class="headerlink" title="BigInt"></a>BigInt</h3><p>新增加的 BigInt<br>是一个内置对象，提供一种方法来表示任意大小的整数<br>注意：某些方面类似于 Number，不能使用 Math 对象中的方法，不能和任何 Number()实例混合运算，两者必须转换成同一类型，BigInt 变量转换成 Number 变量时可能会丢失精度</p>
<p>使用方法<br><img src="/2024/02/05/redbook/2024-02-15-15-07-59.png" srcset="/img/loading.gif" lazyload></p>
<p>bigInt 是有符号的，所以不能用无符号右移，除法是向零取整</p>
<p>tips：向零取整也称为“截断取整”</p>
<ul>
<li>正数：取整数部分</li>
<li>负数：取其绝对值的整数部分添加负号</li>
</ul>
<p><img src="/2024/02/05/redbook/2024-02-15-15-16-04.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="String-类型"><a href="#String-类型" class="headerlink" title="String 类型"></a>String 类型</h3><p>先要科普一下 Unicode</p>
<p>它为每种语言周末的字符设定了统一且唯一的二进制编码</p>
<p>简单来说就是把普通字符标准化了，这样就不会显示为乱码</p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/12/unicode.html">https://www.ruanyifeng.com/blog/2014/12/unicode.html</a></p>
<p><img src="/2024/02/05/redbook/2024-02-09-11-27-47.png" srcset="/img/loading.gif" lazyload></p>
<p>注意：转义序列表示一个字符<br><code>&#39;\u03a3&#39;.length  // 1</code></p>
<p>双字节字符暂时还未讨论到，后面再看看</p>
<h4 id="字符串的特点"><a href="#字符串的特点" class="headerlink" title="字符串的特点"></a>字符串的特点</h4><p>不可变性，如果要更新字符串实际上是一个销毁之前的再重填的一个过程，当然这些处理是在后台发生的，所以早期浏览器在拼接字符串的时候非常慢，现在已经针对性的解决了这个问题</p>
<h4 id="转换为字符串"><a href="#转换为字符串" class="headerlink" title="转换为字符串"></a>转换为字符串</h4><ul>
<li>toString()<ul>
<li>字符串会返回自身的一个副本</li>
<li>null 和 undefined 没有 toString()方法，会产生报错<br>注意：如果 toString()的对象是 number 类型，我们可以使用传入参数（底数）来返回对应的进制数，其他对象不会有变化</li>
<li>Object 就直接返回’[object Object]’</li>
<li>数组会进行连接，相当于 Array.join（’,’）</li>
<li>NaN.toString() NaN</li>
</ul>
</li>
<li>String()<br>如果一个值不确定是不是 null 或 undefined 的时候，就是用 String()转型函数<br>区别:<ul>
<li>如果值存在 toString()方法，则直接调用，注意这里不会传参，所以做数值进制转换的时候还是应该用 toString()</li>
<li>像 null 和 undefined 没有 toString()方法的就直接返回字面量文本,’undefined’,’null’,</li>
</ul>
</li>
</ul>
<h6 id="模版字面量（模版字符串）"><a href="#模版字面量（模版字符串）" class="headerlink" title="模版字面量（模版字符串）"></a>模版字面量（模版字符串）</h6><p><img src="/2024/02/05/redbook/2024-02-09-15-36-21.png" srcset="/img/loading.gif" lazyload></p>
<p>注意模版字符串的换行符是会保留的</p>
<p>字符串插值<code>$&#123;value&#125;11</code></p>
<p>所有被插入的值都会使用 toString()强制转型为字符串</p>
<p>也可以调用函数和方法</p>
<ul>
<li>标签函数<br>通过标签函数自定义插值行为<br>可以理解为你自己写一个函数来自定义插值行为<br><img src="/2024/02/05/redbook/2024-02-09-17-01-03.png" srcset="/img/loading.gif" lazyload></li>
<li>String.raw<br>这就是一个内部定义好的标签函数，用于返回字符串的原始内容，比如有换行符啊，或者就是 Unicode 字符<br><img src="/2024/02/05/redbook/2024-02-09-17-08-15.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h3 id="Symbol-类型"><a href="#Symbol-类型" class="headerlink" title="Symbol 类型"></a>Symbol 类型</h3><p>符号实例是唯一的、不可变的<br>用途：确保对象属性使用唯一标识符，不会发生属性冲突的危险<br>符号就是用来创建唯一记号，进而用作非字符串形式的对象属性</p>
<p>注意,可以传参，但是传参只是对当前字符串的描述，只是描述跟符号的定义或标识完全无关</p>
<p>注意，symbol()函数不能跟 new 关键字一起作为构造函数使用</p>
<ul>
<li>Symbol.for()<br>创建全局符号,传参的是字符串健<br>tips：幂等：多次执行的结果和只执行一次相等<br>Symbol.for(‘foo’),先去全局注册表里找有没有，不存在则创建，存在则直接返回对应的符号实例</li>
</ul>
<p><img src="/2024/02/05/redbook/2024-02-10-13-14-43.png" srcset="/img/loading.gif" lazyload></p>
<p>传递给 symbol.for()的任何值都会被转换为字符串<br><img src="/2024/02/05/redbook/2024-02-10-13-18-54.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>Symbol.keyFor()<br>查询全局注册表（也就是查 Symbol.for 创建的符号），传参是符号，返回的是字符串键，传参有误会报错，找不到就是 undefined<br><img src="/2024/02/05/redbook/2024-02-10-13-34-43.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h4 id="使用符号作为属性"><a href="#使用符号作为属性" class="headerlink" title="使用符号作为属性"></a>使用符号作为属性</h4><p>前面我们提到了，symbol 的用途是保证属性的唯一性,也就是作为对象的 key<br><img src="/2024/02/05/redbook/2024-02-10-15-27-14.png" srcset="/img/loading.gif" lazyload><br>对于使用 symbol 作为属性的我们可以这样获取<br><img src="/2024/02/05/redbook/2024-02-10-15-36-01.png" srcset="/img/loading.gif" lazyload><br>最好还是把 symbol 属性用变量存起来，不然便利的时候不好找</p>
<h4 id="内置的符号"><a href="#内置的符号" class="headerlink" title="内置的符号"></a>内置的符号</h4><p>最重要的用途：重新定义它们，从而改变原生结构的行为</p>
<p>其实也就是我告诉你我现在有这个属性，这个属性反正不能改，但是你可以去改变这个属性所关联的方法</p>
<p>反正就是一个 Symbol 属性，感觉就是一个特定的代号</p>
<ul>
<li><p>Symbol.iterator &#x2F;&#x2F; @@iterator<br>举例：我们知道 for-of 循环会在相关对象上使用 Symbol.iterator 属性，那么我们就可以去重写这个属性来改变 forof 迭代对象的行为</p>
</li>
<li><p>Symbol.asyncIterator<br>这个符号表示实现异步迭代器 API 函数<br>for-await-of<br>咱们直接看这个例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Emitter</span> &#123;<br>	<span class="hljs-title function_">constructor</span>(<span class="hljs-params">max</span>) &#123;<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-property">max</span> = max;<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncIdx</span> = <span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">async</span> *[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">asyncIterator</span>]() &#123;<br>		<span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncIdx</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">max</span>) &#123;<br>			<span class="hljs-keyword">yield</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncIdx</span> += <span class="hljs-number">2</span>)));<br>		&#125;<br>	&#125;<br>&#125;<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncCount</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">let</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emitter</span>(<span class="hljs-number">5</span>);<br>	<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> x <span class="hljs-keyword">of</span> emitter) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x);<br>	&#125;<br>&#125;<br><span class="hljs-keyword">await</span> <span class="hljs-title function_">asyncCount</span>();<br><span class="hljs-comment">// 2 4 6</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>Symbol.hasInstance<br>表示一个方法，这个方法决定一个构造器对象是否认可一个对象是它的实例<br>这个就是 instabceof 操作符使用<br>就是看这个对象是不是某个对象类的实例<br>专业点就是一个对象实例的原型链上是否有原型<br><code>instanceof</code>的使用场景<br><img src="/2024/02/05/redbook/2024-02-10-16-37-09.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.isConcatSpreadable<br>影响的就是这个方法的行为 Array.prototype.concat()</p>
<ul>
<li>对于类数组对象，默认会被打平（即使是这时候是 undefined），为 false 或者假值就会被追加到数组末尾</li>
<li>对于非类数组对象，为 true 时会被直接忽略掉<br><img src="/2024/02/05/redbook/2024-02-10-18-41-37.png" srcset="/img/loading.gif" lazyload><br><img src="/2024/02/05/redbook/2024-02-10-18-54-24.png" srcset="/img/loading.gif" lazyload></li>
</ul>
</li>
<li><p>Symbol.iterator<br>该属性名对应的一个方法，该方法返回对象默认的迭代器，for-of 函数使用</p>
</li>
<li><p>Symbol.match<br>该属性名表示：一个正则表达式方法，该方法用正则表达式去匹配字符串</p>
<p>String.prototype.match()方法使用<br><img src="/2024/02/05/redbook/2024-02-10-21-10-50.png" srcset="/img/loading.gif" lazyload></p>
<p>如果一个对象有一个名为 Symbol.match 的方法，那么它可以被用作自定义匹配器。Symbol.match 的返回值将成为 match() 方法的返回值。<br><img src="/2024/02/05/redbook/2024-02-10-21-11-08.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.replace<br>该属性名表示：一个正则表达式，该方法替换一个字符串中匹配的子串</p>
<p>和 match 也是一样，传入的非正则表达式，会被自动转换为 RegExp 对象</p>
<p>要想改变这个行为就重写这个属性方法</p>
<p>String.prototype.replace()</p>
<p>tips：<br>String.split() 字符串分割<br>可以这么理解，以传入的参数作为分割条件进行分割，第二个参数指定分割数组长度<br>Array.join() 数组聚合<br><img src="/2024/02/05/redbook/2024-02-10-22-42-48.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.search<br>String.prototype.search()<br>和 match 也是一样的，传入的非正则表达式，会被自动转换为 RegExp 对象，有需要可以自己改写<br>那么问题就来了，search 和 match 有什么区别呢？</p>
<ul>
<li>search 返回的是索引&#x2F;match 返回的数组<br><img src="/2024/02/05/redbook/2024-02-10-23-27-32.png" srcset="/img/loading.gif" lazyload></li>
<li>未找到时返回的结果不一样<br><img src="/2024/02/05/redbook/2024-02-10-23-30-19.png" srcset="/img/loading.gif" lazyload></li>
</ul>
</li>
<li><p>Symbol.species<br>该属性表示用于对内置类型实例方法的返回值暴露实例化派生对象的方法<br>举例用的 getter 方法，没有太理解<br><img src="/2024/02/05/redbook/2024-02-11-10-19-35.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.split<br>该属性表示一个正则表达式方法，该方法在匹配正则表达式的索引位置拆分字符串，也就是上面我们提到的拆分字符串，与上面 match，search 那些相同，传入的非正则表达式会被转换为 RegExp 对象</p>
</li>
<li><p>Symbol.toPrimitive<br>该属性表示一个方法，该方法将对象转换为相应的原始值<br>ToPrimetive 使用<br>注意这里是对象，比如<br><img src="/2024/02/05/redbook/2024-02-11-11-12-25.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.toStringTag<br>该属性表示：一个字符串，该字符串用于创建对象的默认字符串描述。由内置方法<br>Object.prototype.toString()使用<br>注意这里是 Object<br><img src="/2024/02/05/redbook/2024-02-11-11-31-20.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>Symbol.unscopables<br>with 废弃，简单来说就是一种绑定关系，可以指定一个变量，将所有的引用都指向这个变量</p>
</li>
</ul>
<p>总结：symbol 主要就是用来确保对象属性的唯一性，一些内置属性以字符串属性的形式存在，就是已经暴露给你了，你通过直接修改这些属性方法就能自定义内置方法</p>
<h3 id="Object-类型"><a href="#Object-类型" class="headerlink" title="Object 类型"></a>Object 类型</h3><p>对象，其实就是一组数据和功能的集合<br><code>let o = new Object()</code>;<br>每个 Object 实例都有如下属性和方法</p>
<ul>
<li>construct</li>
<li>hasOwnProperty(propertyName):用于判断当前对象实例是否存在给定的属性,检查的属性名必须是字符串或者符号</li>
<li>isPrototypeOf</li>
<li>propertyIsEnmerable(propertyName):用于判断给定的属性是否可以使用</li>
<li>toLocaleString(),根据机器的本地执行化环境来返回字符串</li>
<li>toString()，返回对象的字符串表示<br>具体如何理解？用 new Date 就很好理解了<br><img src="/2024/02/05/redbook/2024-02-11-13-24-22.png" srcset="/img/loading.gif" lazyload></li>
<li>valueOf(),返回对象对应的字符串、数值或者布尔值表示，通常与 toString()返回的值相同</li>
</ul>
<p>Object 所有对象的基类</p>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>操作符一般会调用 valueOf()和 toString()方法来取得可以计算的值</p>
<h3 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h3><p>只操作一个值的操作叫一元操作符</p>
<h4 id="递增-递减操作符"><a href="#递增-递减操作符" class="headerlink" title="递增&#x2F;递减操作符"></a>递增&#x2F;递减操作符</h4><ul>
<li>前缀版<br>变量的值在语句被求值之前改变<br><code>--age + 2</code><br>从左到右依次求值，也就是先完成减法操作，进行+2 处理</li>
<li>后缀版<br>如果只是唯一操作，比如 <code>++a, a++</code>,这时候的差异是没影响的,只是因为没其他操作，看不出来影响<br>与其他操作混合，就会有差异<br>后缀是先执行操作然后变量再+1 或者-1<br><img src="/2024/02/05/redbook/2024-02-11-16-48-10.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<p>++&#x2F;– 可以作用于任何值</p>
<p>注意：这里转换是先执行的，也就是先转换在做++&#x2F;–或者其他操作</p>
<ul>
<li>字符串</li>
<li>数值形式的字符串<br>变换为数值</li>
<li>非有效数值字符串<br>NaN</li>
<li>布尔值</li>
<li>false 0</li>
<li>true 1</li>
<li>浮点数<br>数值操作</li>
<li>对象<br>valueOf 方法可以获得操作的值（具体到第五章了）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> s1 = <span class="hljs-string">&#x27;2&#x27;</span>;<br><span class="hljs-keyword">let</span> s2 = <span class="hljs-string">&#x27;z&#x27;</span>;<br><span class="hljs-keyword">let</span> b = <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">let</span> f = <span class="hljs-number">1.1</span>;<br><span class="hljs-keyword">let</span> o = &#123;<br>	<span class="hljs-title function_">valueOf</span>(<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>	&#125;,<br>&#125;;<br><span class="hljs-comment">// 这里只讨论最终值的变化</span><br>s1++; <span class="hljs-comment">// 3</span><br>s2++; <span class="hljs-comment">// NaN</span><br>b++; <span class="hljs-comment">// 1</span><br>f++; <span class="hljs-comment">// 0.10000000000000009 (浮点数的精度不准确)</span><br>o--; <span class="hljs-comment">// -2</span><br></code></pre></td></tr></table></figure>

<h4 id="一元的加和减"><a href="#一元的加和减" class="headerlink" title="一元的加和减"></a>一元的加和减</h4><p>就是数值前面加上+&#x2F;-</p>
<ul>
<li>加号应用到数值，没有任何影响，减号取复值</li>
<li>应用到非数值，会执行类似的 Number()类型转换，减号一样的就是取负值</li>
</ul>
<h4 id="位操作符"><a href="#位操作符" class="headerlink" title="位操作符"></a>位操作符</h4><p>位操作不直接应用到 64 位表示，而是先把值转换为 32 位整数，再进行位操作<br>（还不太理解）</p>
<ul>
<li><p>1bit 符号位为正值<br>剩下的是以二进制格式存储<br>例图：<br><img src="/2024/02/05/redbook/2024-02-11-22-39-28.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>符号为负值<br>以补码的二进制编码存储</p>
<ul>
<li>先求当前数值的绝对值的二进制值</li>
<li>反转二进制值 0 变 1 1 变 0 反码</li>
<li>最后+1<br><img src="/2024/02/05/redbook/2024-02-11-22-52-42.png" srcset="/img/loading.gif" lazyload></li>
</ul>
</li>
</ul>
<p>不过直接负值 toString(2),拿到的会是正值的二进制+负号</p>
<p><img src="/2024/02/05/redbook/2024-02-11-23-17-12.png" srcset="/img/loading.gif" lazyload></p>
<p>ECMAScript 中所有的整数都表示为有符号数，无符号数不存符号，所以自然会比有符号数能存的数据范围更大</p>
<p>接上面的，位操作符应用的时候，后台会发生转换，也就是会有一个 64 位转换到 32 为数值再转回 64 位的过程</p>
<p>这个转换会有一个负作用<br>特殊值：NaN 和 infinity 在位操作中会被当成 0 处理</p>
<p>位操作符应用到非数值，首先会使用 Number()函数将该值转换为数值（自动执行），再应用位操作</p>
<p>注意这里的位操作符是从右往左读的，也就是第一位是最右边的，对于有符号整数，第三十二位表示数值的符号，0 表示正，1 表示负</p>
<h5 id="按位非（-）"><a href="#按位非（-）" class="headerlink" title="按位非（~）"></a>按位非（~）</h5><p>对数值取反（取负数）再进行减-操作<br>位操作会快很多 因为位操作是直接操作数值底层表示上完成的</p>
<h5 id="按位与（-）"><a href="#按位与（-）" class="headerlink" title="按位与（&amp;）"></a>按位与（&amp;）</h5><p>只有都为 1 的时候才为 1<br>有 0 则是 0</p>
<h5 id="按位或（｜）"><a href="#按位或（｜）" class="headerlink" title="按位或（｜）"></a>按位或（｜）</h5><p>有 1 则为 1</p>
<h5 id="按位异或（-）"><a href="#按位异或（-）" class="headerlink" title="按位异或（^）"></a>按位异或（^）</h5><p>相同为 0 不同为 1</p>
<h5 id="左移（"><a href="#左移（" class="headerlink" title="左移（&lt;&lt;）"></a>左移（&lt;&lt;）</h5><p>注意这里是整体向左移动 5 位<br>例如：2 &lt;&lt; 5<br>2 换成二进制就是 10，然后整体向左移动 5 位 1000000 &#x3D; 64</p>
<p>这里会保留操作符的正负号</p>
<h5 id="有符号右移（-）"><a href="#有符号右移（-）" class="headerlink" title="有符号右移（&gt;&gt;）"></a>有符号右移（&gt;&gt;）</h5><p>注意这里第一个 bit 位固定是符号位，有符号的右移是整体向右移动，左边的空位补 0</p>
<p>也就是符号位是固定的</p>
<h5 id="无符号右移（-）"><a href="#无符号右移（-）" class="headerlink" title="无符号右移（&gt;&gt;&gt;）"></a>无符号右移（&gt;&gt;&gt;）</h5><p>无符号就不会去固定符号位，而是直接 32 位整体移动，对于负数符号位为 1，整体右移之后数据就会有很大的差异<br>例子：<br><img src="/2024/02/05/redbook/2024-02-12-22-49-28.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="布尔操作符"><a href="#布尔操作符" class="headerlink" title="布尔操作符"></a>布尔操作符</h4><ul>
<li><p>逻辑非<br>可应用给任何值，始终返回布尔值<br>先将操作数转换为布尔值，再进行取反</p>
<ul>
<li>! 一个感叹号<ul>
<li>对象 false</li>
<li>‘’ 空字符串 true</li>
<li>非空字符串 false</li>
<li>数值 0 true</li>
<li>非零数值（包括 infinity），返回 false 注意</li>
<li>null true</li>
<li>NaN true 注意</li>
<li>undefined true</li>
</ul>
</li>
<li>!! 两个感叹号<br>相当于调用了转型函数 Boolean()，第一个！总会返回布尔值，第二个叹号取反</li>
</ul>
</li>
<li><p>逻辑与（&amp;&amp;）<br>可以用于任何类型的操作数<br>逻辑与并不一定返回布尔值<br>注意：</p>
<ul>
<li>只要第一个操作数是假值，就直接返回对应的假值</li>
<li>第一个值为 true 才考虑第二个操作数<br><img src="/2024/02/05/redbook/2024-02-12-23-46-59.png" srcset="/img/loading.gif" lazyload><br>我们可以看到逻辑与是短路操作符，如果第一个操作数决定了操作结果 false，就不会去看第二个操作数，即使这个第二份操作数可能不存在<br><img src="/2024/02/05/redbook/2024-02-12-23-52-36.png" srcset="/img/loading.gif" lazyload></li>
</ul>
</li>
<li><p>逻辑或（||）</p>
<p>基本和逻辑或的类似，也存在短路特性，只是这里是或运算，如果第一个操作数为 true 就不管第二个了<br>在实际开发中使用场景可以是备选值<code>let res = a || b</code></p>
</li>
</ul>
<h4 id="乘性操作符"><a href="#乘性操作符" class="headerlink" title="乘性操作符"></a>乘性操作符</h4><p>就是乘法运算符啦，用于两个数值的运算</p>
<ul>
<li>超出范围的（无法表示乘积的）就返回 Infinit 或者-Infinit</li>
<li>有 NaN 的就返回 NaN</li>
<li>注意 Infinity * Infiniy 返回 Infinity</li>
<li>不是数值的操作数，先在后台用 Number()将其转换为数值</li>
</ul>
<h4 id="除法操作符"><a href="#除法操作符" class="headerlink" title="除法操作符"></a>除法操作符</h4><p>就是除法运算啦<br>基本上跟乘法运算差不多的</p>
<p>注意几个区别</p>
<ul>
<li>0 &#x2F; 0 NaN</li>
<li>非 0 &#x2F; 0 根据第一个操作符返回 Infinity 或 -Infinit</li>
<li>Infinity &#x2F; Infinity NaN</li>
</ul>
<h4 id="取模操作符-（-）"><a href="#取模操作符-（-）" class="headerlink" title="取模操作符 （%）"></a>取模操作符 （%）</h4><p>取模就是取余，跟除法操作符类似<br>首先得知道除数和被除数<br><img src="/2024/02/05/redbook/2024-02-13-11-57-59.png" srcset="/img/loading.gif" lazyload><br>以下是一些特殊规则</p>
<ul>
<li>被除数无限值，除数有限值，NaN</li>
<li>被除数有限值，除数 0，NaN</li>
<li>Infinity % Infinity NaN</li>
<li>被除数有限值，除数无限值，返回被除数<br>10 % Infinity &#x3D; 10</li>
<li>被除数是 0，除数不是 0，返回 0</li>
</ul>
<h4 id="指数操作符"><a href="#指数操作符" class="headerlink" title="指数操作符"></a>指数操作符</h4><p>Math.pow(); ‘**‘</p>
<p>还可以**&#x3D;&#x3D;直接这样负值</p>
<h4 id="加性操作符"><a href="#加性操作符" class="headerlink" title="加性操作符"></a>加性操作符</h4><p>注意<br><img src="/2024/02/05/redbook/2024-02-13-13-21-39.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="操作数是字符串"><a href="#操作数是字符串" class="headerlink" title="操作数是字符串"></a>操作数是字符串</h5><ul>
<li>两个都是字符串，进行拼接</li>
<li>一个是字符串，另一个操作数转换为字符串，实际上就是用 String()函数</li>
</ul>
<p>注意这里其实都会从左到右顺序执行<br>如果想优先执行，可以使用一对括号</p>
<h4 id="减法操作符"><a href="#减法操作符" class="headerlink" title="减法操作符"></a>减法操作符</h4><p>注意</p>
<ul>
<li>Infinity - Infinity &#x3D; 0</li>
</ul>
<p>tips：NaN 做任何操作都是返回 NaN</p>
<h4 id="关系操作符"><a href="#关系操作符" class="headerlink" title="关系操作符"></a>关系操作符</h4><p>就是&lt;、&gt;、&lt;&#x3D;、&gt;&#x3D;</p>
<p>注意，任一操作符是数值，不是数值的一端就会被转换为数值</p>
<p>比较字符串的时候比较的是对应字符的编码</p>
<p>任何关系操作符涉及比较 NaN 时都返回 false</p>
<h4 id="相等操作符"><a href="#相等操作符" class="headerlink" title="相等操作符"></a>相等操作符</h4><h5 id="等于和不等于"><a href="#等于和不等于" class="headerlink" title="等于和不等于"></a>等于和不等于</h5><p>会在比较前进行类型转换<br>这里其实可以看作是转换为数值<br>比如布尔值，会转换为 0 和 1<br>字符串会转换为数值再进行比较</p>
<p>注意 null 和 undefined 相等<br>任意一个数是 NaN，&#x3D;&#x3D; 就返回 false，即使两个数都数 NaN 也是 false</p>
<ul>
<li>&#x3D;&#x3D;</li>
<li>!&#x3D;</li>
</ul>
<h6 id="全等和不全等"><a href="#全等和不全等" class="headerlink" title="全等和不全等"></a>全等和不全等</h6><p>全等操作符和不全等操作符主要区别是，全等操作符不会对操作数进行类型转换</p>
<h4 id="条件操作符"><a href="#条件操作符" class="headerlink" title="条件操作符"></a>条件操作符</h4><p><code>let a = true ? 1:2</code></p>
<h4 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h4><p>就是 🟰<br><code>*= /= %= += &lt;&lt;=...</code><br>只是简写而已<br>没什么特别之处</p>
<h4 id="逗号操作符"><a href="#逗号操作符" class="headerlink" title="逗号操作符"></a>逗号操作符</h4><p><code>let num1 = 1, num2 = 2, num3 = 3;</code><br><code>let num = (5,1,4,8,0)</code></p>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h3><p>被包裹的条件会用 Boolean 进行转换</p>
<h3 id="do-while-语句"><a href="#do-while-语句" class="headerlink" title="do-while 语句"></a>do-while 语句</h3><p>后测试循环体,代码执行后（do 部分）才会对退出条件进行求值（while 部分）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">do</span> &#123;<br>	i += <span class="hljs-number">2</span>;<br>&#125; <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">10</span>);<br><span class="hljs-comment">// 2 4 6 8 10</span><br></code></pre></td></tr></table></figure>

<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><p>先测试循环语句</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">10</span>) &#123;<br>	i += <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>先测试后循环语句<br>while 实现不了的，for 也无法实现，for 只是将循环封装了一些</p>
<p>for 的初始化代码不一定都要写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (;;) &#123;<br>	<span class="hljs-comment">// 无穷循环</span><br>	<span class="hljs-title function_">doSomething</span>();<br>&#125;<br><span class="hljs-keyword">let</span> count = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (; i &lt; count; ) &#123;<br>	i++;<br>	<span class="hljs-title function_">doSomething</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="for-in"><a href="#for-in" class="headerlink" title="for-in"></a>for-in</h3><p>用于进行枚举对象中的非符号键属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> propName <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) &#123;<br>	<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(propName);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这里推荐使用 const 这里的变量不会被改变</p>
<h3 id="for-of"><a href="#for-of" class="headerlink" title="for-of"></a>for-of</h3><p>这里是用于遍历可迭代的对象，比如数组，属性之类的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> el <span class="hljs-keyword">of</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]) &#123;<br>	<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(el);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>for-await-of,支持 promise 异步可迭代对象</p>
<h3 id="标签语句"><a href="#标签语句" class="headerlink" title="标签语句"></a>标签语句</h3><p>用于给语句加标签，在后面可以通过 break 或者 continue 语句引用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">start</span>: <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用场景是多嵌套循环，也就多个 for 循环中，跳出外层循环</p>
<h3 id="break-和-continue-语句"><a href="#break-和-continue-语句" class="headerlink" title="break 和 continue 语句"></a>break 和 continue 语句</h3><p>这里主要注意一下标签语句的应用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> num = <span class="hljs-number">0</span>;<br><span class="hljs-attr">outer</span>: <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++) &#123;<br>		<span class="hljs-keyword">if</span> (i == <span class="hljs-number">5</span> &amp;&amp; j == <span class="hljs-number">5</span>) &#123;<br>			<span class="hljs-comment">// 这里直接跳到最外层循环继续执行</span><br>			<span class="hljs-keyword">continue</span> outer;<br>		&#125;<br>		num++;<br>	&#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">//95</span><br></code></pre></td></tr></table></figure>

<h3 id="with-语句"><a href="#with-语句" class="headerlink" title="with 语句"></a>with 语句</h3><p>已经废弃，不推荐使用<br>将代码作用域设定为指定对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> qs = location.<span class="hljs-property">search</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<br><span class="hljs-keyword">with</span> (location) &#123;<br>	<span class="hljs-keyword">let</span> qs = search.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h3><p>switch 语句在进行条件比较的时候使用的是全等操作符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">switch</span> (num) &#123;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);<br>		<span class="hljs-keyword">break</span>;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: &#123;<br>		<span class="hljs-comment">// 如果需要使用块级作用域</span><br>		<span class="hljs-keyword">let</span> message = <span class="hljs-string">&#x27;hi&#x27;</span>;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>		<span class="hljs-keyword">break</span>;<br>	&#125;<br>	<span class="hljs-attr">default</span>:<br>		<span class="hljs-comment">// 位置可以变动，不满足任何条件的时候进这里</span><br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;default&#x27;</span>);<br>		<span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>这里简单介绍了函数，只讲了 函数的 return；return 不赋值的时候默认是返回 undefined</p>
<h1 id="第四章-变量、作用域与内存"><a href="#第四章-变量、作用域与内存" class="headerlink" title="第四章 变量、作用域与内存"></a>第四章 变量、作用域与内存</h1><h2 id="原始值与引用值"><a href="#原始值与引用值" class="headerlink" title="原始值与引用值"></a>原始值与引用值</h2><p>js 可以包含两种不同类型的数据</p>
<ul>
<li>原始值 最简单的数据类型<br>Undefined Null Boolean Number String Symbol BigInt<br>对于原始值，按值访问，操作的就是实际值</li>
<li>引用值<br>由多个值构成的对象 Object<br>保存引用值的变量是按引用访问的</li>
</ul>
<h3 id="动态属性"><a href="#动态属性" class="headerlink" title="动态属性"></a>动态属性</h3><p>定义原始值或者引用值都是创建变量来赋值，区别在于这个变量保存了这个值以后能做什么大有不同</p>
<ul>
<li>引用值可以随时添加和删除属性方法等</li>
<li>原始值没有属性，即使强制加上属性不报错但是是找不到这个属性的</li>
</ul>
<p>注意，原始类型的初始化就只是用原始值字面量形式，如果使用 new 关键字，则会创建一个 Object 实例，会被认为是 object</p>
<h3 id="复制值"><a href="#复制值" class="headerlink" title="复制值"></a>复制值</h3><p>复制值也就是一个变量赋值给另一个变量</p>
<ul>
<li>原始值的复制是把旧变量的值直接复制到新变量的位置，变成两个独立变量</li>
</ul>
<p><img src="/2024/02/05/redbook/2024-02-18-22-09-05.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>引用值的复制<br>复制的其实只是一个指针，指向存储在堆内存中的对象，所以一个对象的变化会在另一个对象上反映出来<br><img src="/2024/02/05/redbook/2024-02-18-22-11-03.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h3 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h3><p>这里指的就是函数的传参，传参意味着值会被复制到一个局部变量（即一个命名空间，就是 arguments 中一个槽位）可以理解为就是创建了一个新的变量</p>
<p>函数的传参都是按值传递的，这里的值传递我们可以理解为栈值传递，对于原始值对于引用值，这里传的是指针地址</p>
<p>tips：</p>
<ul>
<li>形参 函数定义时的参数</li>
<li>实参 函数调用时传递的参数</li>
</ul>
<p>所以会表现为</p>
<ul>
<li>对于原始值，直接进行值的复制操作，函数内对本地变量的影响不会反应到外部</li>
<li>对于引用值，复制的是指针地址，所以函数内对本地变量的操作会反应到外部，因为指针地址是一致的，如果一旦重新给本地变量分配新的堆内存地址，本地变量与外部变量的关系就断掉了就会出现不会影响外部变量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj1 = &#123; <span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;1&#x27;</span> &#125;;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">obj</span>) &#123;<br>	obj.<span class="hljs-property">time</span> = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-title function_">test</span>(obj1);<br><span class="hljs-comment">// obj &#123;a:&#x27;1&#x27;, time:1&#125;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params">obj</span>) &#123;<br>	obj = &#123;&#125;;<br>	obj.<span class="hljs-property">time</span> = <span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-title function_">test1</span>(obj1);<br><span class="hljs-comment">// 无变化 obj &#123;a:&#x27;1&#x27;, time:1&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="确定类型"><a href="#确定类型" class="headerlink" title="确定类型"></a>确定类型</h3><p>typeof 最适合判断一个变量是否是原始类型 具体来说就是：number boolean undefined，string，不太适合用于判断 object，因为我们通常更想知道它是什么类型的对象</p>
<p>tips：typeof 操作符在检测函数时会返回’function’, 在部分浏览器中对于正则表达式 RegExp 也会返回 function，IE 和火狐可能回返回 ‘object’</p>
<h3 id="instanceof-操作符"><a href="#instanceof-操作符" class="headerlink" title="instanceof 操作符"></a>instanceof 操作符</h3><p>如果变量是给定引用类型的实例，instanceof 操作符返回 true</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">colors instansof <span class="hljs-title class_">Array</span>;<br><span class="hljs-comment">// 变量color是Array吗</span><br></code></pre></td></tr></table></figure>

<h2 id="执行上下文与作用域"><a href="#执行上下文与作用域" class="headerlink" title="执行上下文与作用域"></a>执行上下文与作用域</h2><p>简称上下文，变量或函数的上下文决定了它们可以访问哪些数据，以及行为</p>
<p>每个上下文都有一个关联的变量对象（无法通过代码访问变量对象，但后台处理数据会用到）,在上下文中定义的所有的变量和函数都存在于这个对象上</p>
<p>全局上下文是最外层的上下文，ECMAScript 实现的宿主环境不同，表示全局上下文的对象可能不一样</p>
<p>在浏览器中，全局上下文就是我们说的 window 对象，var 定义的全局变量都会成为 window 对象的属性和方法，let 和 const 不会</p>
<p><img src="/2024/02/05/redbook/2024-02-18-22-42-57.png" srcset="/img/loading.gif" lazyload></p>
<p>上下文的所有代码都会在执行完毕后被销毁，包括定义在它上面的所有变量和函数<br>注意，全局上下文只有在应用程序退出前才会被销毁，比如关闭网页或退出浏览器</p>
<p>每个函数都有自己的上下文，当代码执行流进入函数时，函数的上下文被推到一个上下文栈上，函数执行完毕后，上下文栈回弹出该函数的上下文，将控制权返还给之前的执行上下文，ECMAScript 程序执行流就是通过这个上下文栈进行控制的</p>
<p>上下文代码在执行的时候，会创建变量对象的一个作用域链，这个作用域链决定了各级上下文中代码访问变量和函数时的顺序，正在执行的上下文变量对象始终位于作用域链的最前端</p>
<p>如果上下文是函数，其活动对象用作变量对象，活动对象最初只有一个定义变量 arguments（全局上下文没有这个对象）</p>
<p>全局上下文变量对象始终是作用域链的最后一个变量对象</p>
<p>代码执行时的标识符解析是通过沿作用域链逐级搜索标识符名称完成的，搜索过程始终从作用域链的最前端开始，逐级向后，直到找到，没找到会报错</p>
<p>简单来说，就是我们能访问到函数外部的变量是因为我们在作用域链找到了该变量</p>
<p>例子：<br><img src="/2024/02/05/redbook/2024-02-18-22-57-30.png" srcset="/img/loading.gif" lazyload></p>
<p>图中每个矩形框表示不同的上下文</p>
<p>再简单点说，先在自己的上下文变量对象中找，找不到就逐级取上一级上下文变量对象中找</p>
<p>内部上下文可以通过作用域链访问外部上下文中的一切，但外部上下文无法访问内部的上下文</p>
<p>注意：函数参数也被认为是当前上下文中的变量，也就是函数变量是属于函数局部的上下文，也同样的上级上下文无法访问</p>
<h3 id="作用域链增强"><a href="#作用域链增强" class="headerlink" title="作用域链增强"></a>作用域链增强</h3><p>这里提到了</p>
<ul>
<li>try&#x2F;catch 语句中的 catch 语句</li>
<li>with 语句</li>
</ul>
<p>仅做了解，这里的作用域链增强其实就是回将特有变量增加到当前作用域链的前端，从而能达到在外部访问内部作用域的情况，不会这么使用</p>
<p>catch 的 看起来是这么个情况<br><img src="/2024/02/05/redbook/2024-02-18-23-13-55.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><h4 id="var-函数作用域声明"><a href="#var-函数作用域声明" class="headerlink" title="var 函数作用域声明"></a>var 函数作用域声明</h4><p>变量会被自动添加到最接近的上下文，如果是在函数中，最接近的上下文就是函数局部上下文</p>
<p>注意这里，如果未声明变量会被添加到全局上下文，在严格模式下会报错</p>
<p><img src="/2024/02/05/redbook/2024-02-19-21-36-34.png" srcset="/img/loading.gif" lazyload></p>
<p>var 声明会被拿到函数或全局作用域的顶部，位于作用域中所有代码之前，这个现象叫“提升”，也就是变量提升</p>
<p>会产生什么现象呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name); <span class="hljs-comment">// 不会报错;</span><br>name = <span class="hljs-string">&#x27;Jake&#x27;</span>;<br><span class="hljs-keyword">var</span> name;<br><span class="hljs-comment">// 等价于</span><br><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jake&#x27;</span>;<br><span class="hljs-comment">// var 声明的变量会被提升到最顶端</span><br></code></pre></td></tr></table></figure>

<h4 id="let-块级作用域声明"><a href="#let-块级作用域声明" class="headerlink" title="let 块级作用域声明"></a>let 块级作用域声明</h4><p>块级作用域：由最近的一对包含花括号{}界定</p>
<p>let 与 var 除了变量提升的区别还有一个区别是同一个作用域内不能声明两次，重复的 var 声明会被忽略；重复的 let 声明会抛出错误</p>
<h4 id="使用-const-的常量声明"><a href="#使用-const-的常量声明" class="headerlink" title="使用 const 的常量声明"></a>使用 const 的常量声明</h4><p>使用 const 声明的变量必须同时初始化为某个值，一经声明，在其生命周期的任何时候都不能在重新赋值</p>
<p>其他和 let 一样</p>
<p>对于对象来说，赋值为对象的 const 变量不能再被重新赋值为其他引用值，但对象的健不受影响</p>
<p>怎么理解呢，也就是只要对象的引用地址不发生变化就可以</p>
<p><img src="/2024/02/05/redbook/2024-02-19-22-00-34.png" srcset="/img/loading.gif" lazyload></p>
<p>如果想让整个对象都不能修改可以使用<code>Object.freeze(&#123;&#125;)</code></p>
<p><img src="/2024/02/05/redbook/2024-02-19-22-03-38.png" srcset="/img/loading.gif" lazyload></p>
<p>const 声明暗示变量的值是单一类型且不可修改</p>
<h3 id="标识符的查找（变量的查找）"><a href="#标识符的查找（变量的查找）" class="headerlink" title="标识符的查找（变量的查找）"></a>标识符的查找（变量的查找）</h3><p>先在局部作用域中查找，到找了搜索结束；没找到继续沿作用域链搜索，一直持续到搜索到全局上下文的变量对象</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>redbook</div>
      <div>https://treeu.github.io/2024/02/05/redbook/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Tree</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>February 5, 2024</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/02/14/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E4%BD%BF%E7%94%A8/" title="位运算的使用">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">位运算的使用</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/12/03/js%E5%86%85%E5%AD%98%E7%9B%B8%E5%85%B3/" title="js内存相关">
                        <span class="hidden-mobile">js内存相关</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Liumenglan</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>2023</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
